{% extends "base/layout.html" %}
{% block title %}
    Create New Home Form: rooms
{% endblock %}

{% block main %}
    <div
        class=""
        id="floor-list-loader"
        hx-get="/show_list/"
        hx-vals='{"list_model": "Floor", "view_override":"horiz-scroll"}'
        hx-trigger="load once"
        hx-swap="outerHTML"
        hx-indicator="#updating-indicator"
    >
        <input id="dummy-placeholder" type="hidden" name="items" />
        <div id="updating-indicator" class="htmx-indicator">Updating...</div>
    </div>
    <h1>Create Rooms</h1>
    
    <div
        class="row g-0 row-cols-4 container-fluid bg-dark border border-primary border-5 rounded-top-4 p-1"
        id="default-room-types-container"
        hx-get="/show_list/{{ defaults_list.id }}"
        hx-trigger="load"
        hx-swap="outerHTML"
        hx-indicator="#updating-indicator"
    ></div>

    <div
        class="row g-0 row-cols-4 container-fluid bg-warning border border-success border-5 rounded-bottom-4 p-1"
        id="room-list-loader"
        hx-get="/show_list/{{ room_list.id }}"
        hx-trigger="load once"
        hx-swap="outerHTML"
        hx-indicator="#updating-indicator"
    >
        <input id="dummy-placeholder" type="hidden" name="items" />
        <div id="updating-indicator" class="htmx-indicator">Updating...</div>
    </div>
    <br />
    <div>
        <a class="btn btn-primary" href="/floorplan/prev" hx-boost="false">
            Edit Previous Floor</a
        >
        <a class="btn btn-primary" href="/floorplan/next" hx-boost="false">
            Edit Next Floor</a
        >

        {% if has_rooms %}
            <a
                class="btn btn-success"
                href="/map/Floor/{{ current_user.active_home.active_floor_id }}"
            >
                Map
            </a>
        {% endif %}
    </div>

<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#tutorialModal">
Show Instructions
</button>

<!-- Modal -->
<div class="modal fade" id="tutorialModal" tabindex="-1" aria-labelledby="tutorialModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-scrollable">
    <div class="modal-content">
    <div class="modal-header">
        <h1 class="modal-title fs-5" id="tutorialModalLabel">Room Task Board Tutorial</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">

    <p>
        Follow the instructions below to create and customize rooms for your
        home:
    </p>
    <ol>
        #bug edit this
        <li>
            Review Default Room Types:
            <ul>
                <li>
                    The default room types are listed in the container
                    below. These include common room types like 'Living Room',
                    'Bedroom', etc.
                </li>
                <li>
                    If you wish to use any of these default types, simply drag
                    and drop them into the desired position.
                </li>
            </ul>
        </li>
        <li>
            Customize Your Room List:
            <ul>
                <li>
                    In the yellow container, you will see the list of rooms you
                    are creating for your home.
                </li>
                <li>You can add new custom rooms or modify existing ones.</li>
                <li>
                    Use the drag-and-drop feature to organize the rooms in the
                    order you prefer.
                </li>
            </ul>
        </li>
        <li>
            Save and Continue:
            <ul>
                <li>
                    You can then proceed to the next step of your home setup.
                </li>
            </ul>
        </li>
    </ol>

    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button hx-post="/tutorial/floors" data-bs-dismiss="modal" type="button" class="btn btn-primary" id="saveChanges">Got it, Don't show again</button>
        </div>
    </div>
    </div>
</div>
</div>

{% if not current_user.tutorial_pingrid_dismissed %}
<script>
const tutorialModal = new bootstrap.Modal(document.getElementById('tutorialModal'));
tutorialModal.show();
</script>
{% endif %}
{% endblock %}
