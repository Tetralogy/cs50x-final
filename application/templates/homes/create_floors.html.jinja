{% extends "base/layout.html" %}
{% block title %}
    Create New Home Form: floors
{% endblock %}

{% block main %}
    <h2>Floors</h2>
    <h3>Add New Floors and name them</h3>
    <p>Please follow the steps below to define the floors in your house:</p>
    <ol>
        <li>
            <strong>View Active Floor:</strong> The active floor number is
            displayed. This is the floor you are currently editing.
        </li>
        <li>
            <strong>Set Ground Floor:</strong> The ground floor number and name
            are displayed. This is the main entry floor.
        </li>
        <li>
            <strong>Add New Floors:</strong> Use the "Add Upper Floor" button to
            add a new floor above the current floors. Use the "Add Basement"
            button to add a floor below the ground floor.
        </li>
        <li>
            <strong>Rename Floors:</strong> After adding a floor, you can rename
            it by clicking on the floor name field and typing a new name.
        </li>
        <li>
            <strong>Reorder Floors:</strong> Drag and drop floor names to
            reorder them. Drag a name outside the list to delete that floor.
        </li>
    </ol>

    <div id="floor-container">
        <button
            type="button"
            class="btn btn-primary"
            hx-post="/create/Floor"
            hx-target="[id*='list-updater-']"
            hx-vals='{"order_index": "0"}'
            hx-swap="afterbegin"
            hx-indicator="#updating-indicator"
            class="d-flex justify-content-center align-items-center input-group"
            style="min-width: 20em; max-width: 40em; display: block;"
        >
            Add Upper Floor
        </button>

        <div
            class="row g-0 row-cols-4 container-fluid bg-dark border border-success border-5 rounded-bottom-4 p-1"
            id="floor-list-loader"
            hx-get="/show_list/"
            hx-vals='{"list_model": "Floor", "force_new_list": "true", "sublevel_limit": "0"}'
            hx-trigger="load once"
            hx-swap="outerHTML"
            hx-indicator="#updating-indicator"
        >
            <input id="dummy-placeholder" type="hidden" name="items" />
            <div id="updating-indicator" class="htmx-indicator">
                Updating...
            </div>
        </div>

        <button
            type="button"
            class="btn btn-primary"
            hx-post="/create/Floor"
            hx-target="[id*='list-updater-']"
            hx-vals='{"name": "Basement"}'
            hx-swap="beforeend"
            hx-indicator="#updating-indicator"
            class="d-flex justify-content-center align-items-center input-group"
            style="min-width: 20em; max-width: 40em; display: block;"
        >
            Add Lower Floor
        </button>
    </div>

    <br />
    <div
        hx-get="/go_define_rooms_button"
        hx-trigger="click from:#floor-container .floor once delay:1s"
    ></div>
{% endblock %}
